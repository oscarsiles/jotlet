{% extends show_modal|yesno:"blank.html,base_generic.html" %}
{% block content %}
    {% load account socialaccount %}
    {% get_providers as socialaccount_providers %}
    {% if not show_modal %}
        <div class="d-flex justify-content-center">
            <div class="d-flex-column flex-grow-1 flex-sm-grow-0"
                 style="width: 400px;">
            {% endif %}
            <form id="login-form"
                  class="pb-2"
                  hx-post="{% url 'account_login' %}"
                  {% if show_modal %}hx-target="#modal-1-body-div" hx-swap="innerHTML"{% endif %}>
                {% csrf_token %}
                {% load crispy_forms_tags %}
                {{ form|crispy }}
                <div class="d-flex-column">
                    <div class="d-flex justify-content-center">
                        <button class="btn btn-primary flex-fill" type="submit">Login</button>
                    </div>
                    <div class="d-flex justify-content-center pt-2">
                        <button class="btn link-secondary shadow-none"
                                id="password-reset-button"
                                hx-get="{% url 'account_reset_password' %}"
                                hx-target="#modal-1-body-div"
                                hx-swap="innerHTML"
                                {% if not show_modal %}data-bs-target="#modal-1-div" data-bs-toggle="modal"{% endif %}>
                            Forgot Password
                        </button>
                        <div class="col-auto my-auto text-secondary">/</div>
                        <button class="btn link-secondary shadow-none"
                                id="signup-button"
                                hx-get="{% url 'account_signup' %}"
                                hx-target="#modal-1-body-div"
                                hx-swap="innerHTML"
                                {% if not show_modal %}data-bs-target="#modal-1-div" data-bs-toggle="modal"{% endif %}>
                            Sign Up
                        </button>
                        <input type="hidden"
                               name="{{ redirect_field_name }}"
                               {% if redirect_field_value %} value="{{ redirect_field_value }}" {% else %} value="/" {% endif %}/>
                    </div>
                </div>
            </form>
            {% if socialaccount_providers %}
                <div class="row">
                    <div class="col">
                        <hr />
                    </div>
                    <div class="col-auto my-auto text-secondary">OR</div>
                    <div class="col">
                        <hr />
                    </div>
                </div>
                {% include "socialaccount/snippets/provider_list.html" with process="login" %}
                {% include "socialaccount/snippets/login_extra.html" %}
            {% endif %}
            {% if not show_modal %}
            </div>
        </div>
    {% else %}
        <h5 id="modal-1-title-div" hx-swap-oob="true">Login</h5>
    {% endif %}
{% endblock content %}

{% extends "base_generic.html" %}
{% load static %}

{% block title %}Board: {{ board }}{% endblock title %}
{% block navbar_title %}
<div class="d-flex flex-column text-break">
    <div class="d-flex">
        {{ board.slug }} - {{ board }}
        <h6><span class="badge bg-secondary mx-2 align-middle" id="board-online-sessions">0</span></h6>
    </div>
    <span class="fs-6">{{ board.description }}</span>
</div>
{% endblock navbar_title %}
{% block navbar-items %}
{% if request.user == board.owner or user.is_staff %}
<li class="nav-item">
    <button class="btn btn-link shadow-none nav-link" hx-get="{% url 'boards:qr-board' board.slug %}" hx-target="#modal-body-div" data-bs-toggle="modal" data-bs-target="#modal-div"><i class="bi bi-qr-code"></i></button>
</li>
{% endif %}
{% endblock navbar-items %}

{% block content %}
{% if board.preferences.background %}
<style>
    #main-content-div{
    background-image: url("{{ board.preferences.background.image.url }}");
    background-size: cover;
    }
</style>
{% endif %}
    <div class="row" id="board-{{ board.slug }}">
        {% for topic in board.topics.all %}
            {% include 'boards/components/topic.html' %}
        {% endfor %}
        <div class="col-sm" id="newTopic-div" hx-trigger="topicCreated" hx-target="#newTopic-div" hx-swap="beforebegin">
            {% if request.user == board.owner or user.is_staff %}
                <button class="btn btn-outline-primary my-2" hx-get="{% url 'boards:topic-create' board.slug %}" hx-target="#modal-body-div" hx-swap="innerHTML" data-bs-toggle="modal" data-bs-target="#modal-div">Create topic</button>
            {% endif %}
        </div>
        
    </div>
{{ board.slug|json_script:"board_slug" }}
{{ request.session.session_key|json_script:"session_key" }}

{% endblock content %}


{% block script %}
<script src="{% url 'reverse_js' %}" type="text/javascript"></script>
<script src="{% static 'js/board.js' %}"></script>
{% endblock script %}
